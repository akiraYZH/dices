<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="css/index.css">
</head>

<body>
    <ul class="dice_set">
        <li>
            <div class="dice">
                <div class="facet front"><span></span></div>
                <div class="facet right"><span></span><span></span></div>
                <div class="facet back">
                    <span></span><span></span><span></span>
                </div>
                <div class="facet left">
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span><span></span></div>
                </div>
                <div class="facet top">
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span></div>
                    <div class="row"><span></span><span></span></div>
                </div>
                <div class="facet bottom">
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span><span></span></div>
                </div>
            </div>
            <div class="shadow"></div>
        </li>
        <li>
            <div class="dice">
                <div class="facet front"><span></span></div>
                <div class="facet right"><span></span><span></span></div>
                <div class="facet back">
                    <span></span><span></span><span></span>
                </div>
                <div class="facet left">
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span><span></span></div>
                </div>
                <div class="facet top">
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span></div>
                    <div class="row"><span></span><span></span></div>
                </div>
                <div class="facet bottom">
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span><span></span></div>
                </div>
            </div>
            <div class="shadow"></div>
        </li>
        <li>
            <div class="dice">
                <div class="facet front"><span></span></div>
                <div class="facet right"><span></span><span></span></div>
                <div class="facet back">
                    <span></span><span></span><span></span>
                </div>
                <div class="facet left">
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span><span></span></div>
                </div>
                <div class="facet top">
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span></div>
                    <div class="row"><span></span><span></span></div>
                </div>
                <div class="facet bottom">
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span><span></span></div>
                </div>
            </div>
            <div class="shadow"></div>
        </li>
        <li>
            <div class="dice">
                <div class="facet front"><span></span></div>
                <div class="facet right"><span></span><span></span></div>
                <div class="facet back">
                    <span></span><span></span><span></span>
                </div>
                <div class="facet left">
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span><span></span></div>
                </div>
                <div class="facet top">
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span></div>
                    <div class="row"><span></span><span></span></div>
                </div>
                <div class="facet bottom">
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span><span></span></div>
                </div>
            </div>
            <div class="shadow"></div>
        </li>
        <li>
            <div class="dice">
                <div class="facet front"><span></span></div>
                <div class="facet right"><span></span><span></span></div>
                <div class="facet back">
                    <span></span><span></span><span></span>
                </div>
                <div class="facet left">
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span><span></span></div>
                </div>
                <div class="facet top">
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span></div>
                    <div class="row"><span></span><span></span></div>
                </div>
                <div class="facet bottom">
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span><span></span></div>
                </div>
            </div>
            <div class="shadow"></div>
        </li>
        <li>
            <div class="dice">
                <div class="facet front"><span></span></div>
                <div class="facet right"><span></span><span></span></div>
                <div class="facet back">
                    <span></span><span></span><span></span>
                </div>
                <div class="facet left">
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span><span></span></div>
                </div>
                <div class="facet top">
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span></div>
                    <div class="row"><span></span><span></span></div>
                </div>
                <div class="facet bottom">
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span><span></span></div>
                    <div class="row"><span></span><span></span></div>
                </div>
            </div>
            <div class="shadow"></div>
        </li>
    </ul>
    <input type="button" value="摇骰" class="btn">
</body>
<script>
    let oBtn = document.querySelector('.btn');
    let oDiceUl = document.querySelector('.dice_set');
    let aRdm = [];
    // aRdm=[6,6,6,6,6,6];
    
    oBtn.addEventListener('click', () => {
        
        aRdm.length = 0;

        
        while (aRdm.length != 6) {
            aRdm.push(Math.floor(Math.random() * 6 + 1));
        }
        console.log(aRdm);

       

        for (let i = 0; i < oDiceUl.children.length; i++) {
            oDiceUl.children[i].style='';
            oDiceUl.children[i].children[0].style = '';
            oDiceUl.children[i].children[1].style = '';
            getComputedStyle(oDiceUl.children[i].children[0]).transition;
            getComputedStyle(oDiceUl.children[i].children[1]).transition;
            oDiceUl.children[i].children[0].style =
                `transition:all 2s cubic-bezier(.15,.65,.98,.65);
                transform: translate(-50%, -50%) scale3d(.5, .5, .5) ${getDegree(aRdm[i])}`;
                
            oDiceUl.children[i].children[1].style =
                `
                transition:all 2s cubic-bezier(.15,.65,.98,.65);
                transform: translate(-50%, -50%) scale(.6);
                background-color: grey`;

            oDiceUl.children[i].children[0].addEventListener('transitionend', function final() {
                
                oDiceUl.children[i].style = `transition:all 0.3s; transform:scale(1.5)`;
                
                oDiceUl.children[i].children[0].removeEventListener('transitionend', final);

            })

        }


    });

    // function getXYZ() {
    //     return Math.random().toFixed(1) * 2 - 1;
    // }

    function getDegree(num) {
        switch (num) {
            case 1:
                return 'rotateY(360deg) rotateX(360deg)';
                break;
            case 2:
                return 'rotateY(270deg) rotateX(360deg)';
                break;
            case 3:
                return 'rotateY(540deg) rotateX(360deg)';
                break;
            case 4:
                return 'rotateY(450deg) rotateX(360deg)';
                break;
            case 5:
                return 'rotateX(270deg) rotateY(360deg)';
                break;
            case 6:
                return 'rotateX(450deg) rotateY(360deg)';
                break;
            default:
                break;
        }
    }
</script>

</html>